[
    {
		"from": "if (extension.gallery) {\n\t\t\tif (!extension.gallery.isSigned && shouldRequireRepositorySignatureFor(extension.private, await this.extensionGalleryManifestService.getExtensionGalleryManifest())) {",
		"by": "if (extension.gallery) {\n\t\t\t// Check if extension is allowed first (before checking platform compatibility or signing)\n\t\t\tconst allowedResult = this.allowedExtensionsService.isAllowed({ id: extension.gallery.identifier.id, publisherDisplayName: extension.gallery.publisherDisplayName });\n\t\t\tif (allowedResult !== true) {\n\t\t\t\treturn new MarkdownString(nls.localize('extension not allowed to install', \\\"This extension cannot be installed because it is not in the allowed list.\\\"));\n\t\t\t}\n\t\t\tif (!extension.gallery.isSigned && shouldRequireRepositorySignatureFor(extension.private, await this.extensionGalleryManifestService.getExtensionGalleryManifest())) {"
	},
	{
		"from": "import { IUserDataProfilesService } from '../../../../platform/userDataProfile/common/userDataProfile.js';",
		"by": "import { IUserDataProfilesService } from '../../../../platform/userDataProfile/common/userDataProfile.js';\nimport { assertInstallFromVSIXCommandAllowed } from '../../../../platform/extensionManagement/common/che/extensionManagement.js';"
	},
	{
		"from": "if (installable instanceof URI) {",
		"by": "if (installable instanceof URI) {\n\t\t\t\tassertInstallFromVSIXCommandAllowed(this.configurationService, this.logService);"
	}
]
